# -*- coding: utf-8 -*-
"""Non-Parametric-Tests-on-Dementia-Dataset

Automatically generated by Colab.

Original file is located at
    https://colab.research.google.com/drive/19VjCEMuBQ92efPaRs3fpe0jBTiAcHPby

# **Table of Contents**
1. Introduction and Problem Statement
2. Importing Libraries and Dataset
3. Exploratory Data Analysis (EDA)

   3.1 Univariate Analysis

   3.2 Bivariate Analysis
4. Non-Parametric Methods

   4.1 Spearman Rank Correlation

   4.2 Mann-Whitney U Test

   4.3 Why not Wilcoxon Signed-Rank Test and Friedman Test?
   
5. Key Insights
6. Key Achievements

7. Conclusions
8. Future Work
9. References

# **1. Introduction and Problem Statement**
This notebook aims to explore a dementia dataset using various non-parametric methods to understand the relationships and differences between groups within the data. The goal is to gain insights that could help in understanding the patterns and factors associated with dementia.

# **2. Importing Libraries and Dataset**

* pandas -- for loading and processing dataset
* matplotlib.pyplot -- for visualization
* Seaborn -- for statistical visualization
* Scipy -- for Scientific Calculations in Python
"""

import pandas as pd
import seaborn as sns
import matplotlib.pyplot as plt
from scipy.stats import spearmanr, mannwhitneyu, wilcoxon, friedmanchisquare

df = pd.read_csv("/content/dementia_dataset.csv")

df.head()

"""In a dementia dataset, the following columns represent different attributes of the subjects and their MRI (Magnetic Resonance Imaging) scans:

1. **Subject ID**: This column likely represents a unique identifier assigned to each subject participating in the study. It helps to distinguish one subject from another in the dataset.

2. **MRI ID**: Similarly to Subject ID, MRI ID is a unique identifier assigned to each MRI scan conducted on the subjects. It helps to identify and differentiate between different MRI scans performed during the study.

3. **Group**: This column indicates the group or category to which each subject belongs. In a dementia study, this might indicate whether the subject belongs to a control group (without dementia) or a patient group (with dementia or other cognitive impairments).

4. **Visit**: Visit refers to the number of visits or sessions the subject has undergone for MRI scans. It could indicate whether the MRI data is from the subject's initial visit or subsequent follow-up visits during the study.

5. **MR Delay**: MR Delay represents the delay between the MRI scan and the actual visit. It measures the time elapsed between scheduling the MRI scan and the actual scan.

6. **M/F**: This column likely represents the gender of the subjects, where 'M' typically stands for male and 'F' for female.

7. **Hand**: Hand indicates the handedness of the subjects, whether they are left-handed, right-handed, or ambidextrous.

8. **Age**: Age refers to the age of the subjects at the time of the MRI scan. It is an important demographic variable that might be correlated with cognitive function.

9. **EDUC**: EDUC represents the education level of the subjects. It could indicate the number of years of formal education completed by each subject.

10. **SES**: SES stands for socioeconomic status. It reflects the social and economic standing of the subjects, which could influence various aspects of health and well-being, including cognitive function.

11. **MMSE**: MMSE stands for Mini-Mental State Examination. It is a brief test used to assess cognitive impairment and dementia, providing a measure of cognitive function.

12. **CDR**: CDR represents the Clinical Dementia Rating. It is a scale used to assess the severity of dementia symptoms in patients.

13. **eTIV**: eTIV stands for Estimated Total Intracranial Volume. It is an estimation of the total volume inside the skull, including brain tissue, cerebrospinal fluid, and other structures.

14. **nWBV**: nWBV refers to the normalized Whole Brain Volume. It represents the brain volume normalized by the total intracranial volume and can provide insights into brain atrophy or changes in brain structure.

15. **ASF**: ASF stands for Atlas Scaling Factor. It is used to scale brain images to a standardized template or atlas, allowing for comparisons across different subjects and studies.
"""

df.info()

df.describe()

"""
###**Insights**:
- The dataset consists of elderly subjects, with the average age being around 77 years.
- Most subjects have high MMSE scores, indicating good cognitive function.
- The distribution of socioeconomic status and education levels shows moderate variability.
- There is considerable variation in MR Delay and eTIV, reflecting differences in scheduling and brain volume among subjects.
- The majority of subjects have low or no dementia, as indicated by the CDR scores.

#**3. Exploratory Data Analysis (EDA)**
##**3.1 Univariate Analysis**
###**Numerical Variables**"""

numerical_vars= df.columns

#Visualize the distribution using histograms
num_numerical_vars = len(numerical_vars)
num_rows = (num_numerical_vars + 2) // 3
plt.figure(figsize=(15, 5 * num_rows))
for i, col in enumerate(numerical_vars, 1):
    plt.subplot(num_rows, 3, i)
    sns.histplot(df[col], kde=True)
    plt.title(f'Distribution of {col}')
plt.tight_layout()
plt.show()

"""###**Insights:**

- **Age**:
  - Most subjects are clustered around the age of 75-80.
  - The distribution shows a right skew, indicating fewer subjects in the older age brackets.
- **MMSE**:
  - MMSE scores are generally high, with a peak around the 28-30 range.
  - Lower scores are less frequent, reflecting a smaller proportion of subjects with severe cognitive impairment.
- **EDUC**:
  - Education levels are varied, with peaks at around 12 and 16 years, indicating common education milestones.
- **SES**:
  - Socioeconomic status is concentrated around level 2-3, suggesting a moderate socioeconomic background for most subjects.
- **eTIV**:
  - Total intracranial volume shows a normal distribution centered around 1500 units.
- **nWBV**:
  - Normalized whole brain volume has a slight left skew, with most values clustered between 0.7 and 0.75.
- **ASF**:
  - The Atlas Scaling Factor is normally distributed, indicating consistent brain size scaling among subjects.

###**Categorical Variables**
"""

# Visualize the distribution using count plots for categorical variables
categorical_vars = ['Group', 'M/F', 'Hand']
plt.figure(figsize=(15, 5 * len(categorical_vars)))
for i, col in enumerate(categorical_vars, 1):
    plt.subplot(len(categorical_vars), 1, i)
    sns.countplot(data=df, x=col)
    plt.title(f'Count plot of {col}')
plt.tight_layout()
plt.show()

"""###**Insights:**

- **Group**:
  - Higher count of nondemented subjects compared to demented and converted.
- **M/F**:
  - Nearly equal distribution of male and female subjects.
- **Hand**:
  - All subjects are right-handed as per the dataset specification.

"""

# Visualize the distribution using box plots
plt.figure(figsize=(15, 5 * num_rows))
for i, col in enumerate(numerical_vars, 1):
    plt.subplot(num_rows, 3, i)
    sns.boxplot(y=df[col])
    plt.title(f'Boxplot of {col}')
plt.tight_layout()
plt.show()

"""###**Insights:**

- **Age**:
  - Wide range with several outliers, indicating a diverse age group.
  - Median age is around 77 years.
- **MMSE**:
  - Median MMSE score is close to 30, indicating generally high cognitive function.
  - Some subjects have very low scores, suggesting severe cognitive impairment.
- **EDUC**:
  - Education levels vary significantly, with a median around 15 years.
- **SES**:
  - Socioeconomic status has a median around 2, with a broad range indicating varied backgrounds.
- **eTIV**:
  - Median intracranial volume is around 1470 units.
- **nWBV**:
  - Median normalized brain volume is approximately 0.73, with a few outliers indicating extreme values.
- **ASF**:
  - The median ASF is close to 1.2, with consistent distribution.

"""

# Display frequency tables showing counts and percentages
for col in categorical_vars:
    print(f"Frequency Table for {col}:")
    print(df[col].value_counts(normalize=False))
    print("Percentage Table for {col}:")
    print(df[col].value_counts(normalize=True) * 100)
    print("\n")

"""###**Insights:**

### Group:
- **Nondemented**:
  - Instances: 190
  - Percentage: 50.94%
- **Demented**:
  - Instances: 146
  - Percentage: 39.14%
- **Converted**:
  - Instances: 37
  - Percentage: 9.92%

### M/F (Gender):
- **Female (F)**:
  - Instances: 213
  - Percentage: 57.10%
- **Male (M)**:
  - Instances: 160
  - Percentage: 42.90%

### Hand:
- **Right-handed (R)**:
  - Instances: 373
  - Percentage: 100%
  - Note: All individuals in the dataset are right-handed.

##**3.2 Bivaraite Analysis**
"""

# Bivariate Analysis
# a. Explore relationships between pairs of numerical variables using scatter plots or pair plots
sns.pairplot(df[['Age', 'MMSE']])
plt.title('Pairplot of Age and MMSE')
plt.show()

"""###**Insights:**

- **Age vs. MMSE**:
  - A general trend where higher MMSE scores are associated with younger ages.
  - Older subjects tend to have a wider range of MMSE scores, reflecting variability in cognitive decline.


"""

# b. Explore relationships between numerical and categorical variables using box plots
plt.figure(figsize=(8, 6))
sns.boxplot(data=df, x='Group', y='Age')
plt.title('Boxplot of Age by Group')
plt.show()

"""###**Insights:**

- **Age by Group**:
  - Nondemented group has a lower median age compared to the demented group.
  - Converted group shows a wider range of ages, reflecting the transition stage.

"""

# List of numerical variables excluding 'MRI ID'
numerical_vars = ['Visit', 'MR Delay', 'Age', 'EDUC', 'SES', 'MMSE', 'CDR', 'eTIV', 'nWBV', 'ASF']

# Check for missing values in numerical variables
missing_values = df[numerical_vars].isnull().sum()
print("Missing values in numerical variables:\n", missing_values)

# Fill missing values if necessary
# For example:
# df[numerical_vars] = df[numerical_vars].fillna(df[numerical_vars].mean())

# Calculate correlation matrix for numerical variables
correlation_matrix = df[numerical_vars].corr()

# Plot the correlation matrix
plt.figure(figsize=(10, 8))
sns.heatmap(correlation_matrix, annot=True, cmap='coolwarm', fmt=".2f", linewidths=0.5)
plt.title('Correlation Matrix of Numerical Variables')
plt.show()

"""### **Correlation Matrix Insights**:
  - Moderate negative correlation between age and MMSE, indicating that cognitive function tends to decline with age.
  - Positive correlation between education and MMSE, suggesting that higher education is associated with better cognitive performance.
  - eTIV and nWBV have a moderate positive correlation, indicating that larger brain volumes are associated with higher normalized brain volumes.

#**4. Non-Parametric Methods**

##**4.1 Spearman Rank Correlation**
"""

# Selecting categorical variable for analysis
categorical_var = 'Group'

# i. Spearman rank correlation for assessing monotonic relationships between numerical variables
correlation_matrix = df[numerical_vars].corr(method='spearman')

# Visualize correlation matrix
plt.figure(figsize=(10, 8))
sns.heatmap(correlation_matrix, annot=True, cmap='coolwarm', fmt=".2f", linewidths=0.5)
plt.title('Spearman Rank Correlation Matrix of Numerical Variables')
plt.show()

"""### **Spearman Rank Correlation Matrix Insights**:
  - Similar trends to the Pearson correlation, with non-linear relationships better captured.
  - Stronger negative correlation between age and MMSE compared to Pearson, highlighting the non-linear decline in cognitive function with age.

##**4.2 Mann-Whitney U Test**
"""

# b. Mann-Whitney U test for comparing distributions across different groups
statistic, p_value_mannwhitneyu = mannwhitneyu(df[df['Group'] == 'Demented']['Age'], df[df['Group'] == 'Nondemented']['Age'])
print(f"Mann-Whitney U test p-value for Age between Demented and Nondemented groups: {p_value_mannwhitneyu:.4f}")

"""### **Mann-Whitney U Test**
- **Age Comparison**:
  - Significant difference in age between demented and nondemented groups, with p-value indicating statistical significance.

###**Why not Wilcoxon Signed-Rank Test and Friedman Test?**

The Mann-Whitney U test is suitable here because it compares independent groups ('Demented' vs. 'Nondemented') on continuous variables ('Age' and 'MMSE'), without assuming normality. It's used when samples are independent, unlike the Friedman test which requires paired observations across multiple groups, and the Wilcoxon test which compares paired data.

---

### **5. Key Insights:**

1. **Group Distribution:**
   - There are 190 instances of 'Nondemented', 146 instances of 'Demented', and 37 instances of 'Converted' individuals in the dataset.
   - Approximately 50.94% are 'Nondemented', 39.14% are 'Demented', and 9.92% are 'Converted'.

2. **Gender Distribution:**
   - There are 213 instances of females (57.10%) and 160 instances of males (42.90%) in the dataset.

3. **Handedness:**
   - All individuals in the dataset are right-handed ('R').

4. **Age Distribution:**
   - The age of subjects ranges from 60 to 98 years, with a mean of approximately 77 years and a standard deviation of 7.64 years.

5. **Education (EDUC) and Socioeconomic Status (SES):**
   - The mean years of education completed by subjects is 14.60 years.
   - SES ranges from 1 to 5, with a mean of 2.46.

6. **Cognitive Function (MMSE):**
   - The mean Mini-Mental State Examination score is 27.34, reflecting cognitive function across subjects.

7. **Brain Metrics:**
   - Estimated Total Intracranial Volume (eTIV) has a mean of 1488.13.
   - Normalized Whole Brain Volume (nWBV) has a mean of 0.73.
   - Atlas Scaling Factor (ASF) has a mean of 1.20, indicating standardized brain scaling.


# **6. Key Achievements**
- Explored the dementia dataset using various statistical and visualization techniques.
- Performed EDA to understand the distribution of variables.
- Applied non-parametric methods to analyze relationships and differences between groups.


#**7. Conclusion**

The analysis of this dementia dataset provides valuable insights into the demographics, cognitive function, and brain metrics of subjects. Key findings include significant proportions of 'Nondemented' and 'Demented' individuals, primarily right-handed and skewed towards females. Cognitive function, assessed through MMSE, shows variability among subjects, suggesting potential correlations with age and educational background. Brain metrics such as eTIV, nWBV, and ASF provide additional context on brain structure across different groups.


# **8.Future Work**

- Further analysis could be done on additional variables and their interactions.
- Implement machine learning models to predict dementia stages based on available features.
- Explore time-series analysis for longitudinal data.


### **9. References:**

1. Kaggle: [Dementia Dataset](https://www.kaggle.com/datasets/shashwatwork/dementia-prediction-dataset)

2. Seaborn Documentation: [Seaborn](https://seaborn.pydata.org/)

3. Scipy Documentation: [Non-Parametric Methods](https://docs.scipy.org/doc/scipy/reference/stats.html)

---
---
"""